<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="utf-8">
  <meta content="width=device-width, initial-scale=1.0" name="viewport">

  <title>Add Doctor - Admin Panel</title>
  <meta content="" name="description">
  <meta content="" name="keywords">

  <!-- Favicons -->
  <link href="../../assets/img/favicon.png" rel="icon">
  <link href="../../assets/img/apple-touch-icon.png" rel="apple-touch-icon">

  <!-- Google Fonts -->
  <link href="https://fonts.gstatic.com" rel="preconnect">
  <link href="https://fonts.googleapis.com/css?family=Open+Sans:300,300i,400,400i,600,600i,700,700i|Nunito:300,300i,400,400i,600,600i,700,700i|Poppins:300,300i,400,400i,500,500i,600,600i,700,700i" rel="stylesheet">

  <!--  CSS Files -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
  <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.css" rel="stylesheet">

  <!-- Template Main CSS File -->
  <link href="../../assets/css/style.css" rel="stylesheet">

  <!-- Custom CSS for this page -->
  <style>
    /* Form Card */
    .form-card {
        background: white;
        border-radius: 10px;
        box-shadow: 0 0 20px rgba(0,0,0,0.08);
        padding: 30px;
        margin: 20px auto;
    }

    /* Section Headers */
    .section-title {
        color: #495057;
        font-size: 18px;
        font-weight: 600;
        margin-bottom: 20px;
        padding-bottom: 10px;
        border-bottom: 2px solid #e9ecef;
    }

    .section-title i {
        color: #0d6efd;
        margin-right: 8px;
    }

    /* Form Controls */
    .form-label {
        font-weight: 500;
        color: #495057;
        margin-bottom: 8px;
    }

    /* Dynamic Fields */
    .dynamic-field-group {
        position: relative;
        margin-bottom: 15px;
    }

    .add-more-btn {
        margin-top: 10px;
    }

    /* Input Group Delete Button */
    .input-group .btn-danger {
        border-top-left-radius: 0;
        border-bottom-left-radius: 0;
    }

    /* Success Message */
    .success-message {
        display: none;
        position: fixed;
        top: 80px;
        right: 20px;
        z-index: 1050;
        animation: slideIn 0.3s ease;
    }

    @keyframes slideIn {
        from { transform: translateX(100%); }
        to { transform: translateX(0); }
    }

    /* Responsive */
    @media (max-width: 768px) {
        .form-card {
            padding: 20px;
        }

        .form-actions {
            flex-direction: column;
            gap: 10px;
        }

        .form-actions .btn {
            width: 100%;
        }
    }
  </style>
</head>

<body>

   <!-- Header -->
  <header id="header" class="header fixed-top d-flex align-items-center">
    <div class="d-flex align-items-center justify-content-between">
      <a href="adminDashboard.html" class="logo d-flex align-items-center">
        <img src="../../assets/img/logo.png" alt="">
        <span class="d-none d-lg-block">Medicore</span> <!--this is class is to hide in phone-->
      </a>
      <i class="bi bi-list toggle-sidebar-btn"></i>
    </div>

    <nav class="header-nav ms-auto">
      <ul class="d-flex align-items-center">
        <!-- Profile -->
        <li class="nav-item dropdown pe-3">
          <a class="nav-link nav-profile d-flex align-items-center pe-0" href="#" data-bs-toggle="dropdown">
            <span class="d-none d-md-block dropdown-toggle ps-2">Admin</span>
          </a>

          <ul class="dropdown-menu dropdown-menu-end dropdown-menu-arrow profile">
            <li class="dropdown-header">
              <h6>Administrator</h6>
              <span>admin@medicore.com</span>
            </li>
            <li><hr class="dropdown-divider"></li>
            <li>
              <a class="dropdown-item d-flex align-items-center" href="adminProfile.html">
                <i class="bi bi-person"></i>
                <span>My Profile</span>
              </a>
            </li>
            <li><hr class="dropdown-divider"></li>
            <li>
              <a class="dropdown-item d-flex align-items-center" href="../login/adminDoctorLogin.html">
                <i class="bi bi-box-arrow-right"></i>
                <span>Sign Out</span>
              </a>
            </li>
          </ul>
        </li>
      </ul>
    </nav>
  </header>
  <!-- Sidebar -->
  <aside id="sidebar" class="sidebar">
    <ul class="sidebar-nav" id="sidebar-nav">
      
      <li class="nav-item">
        <a class="nav-link collapsed" href="adminDashboard.html">
          <i class="bi bi-grid"></i>
          <span>Dashboard</span>
        </a>
      </li>

      <li class="nav-heading">User Management</li>
      
      <li class="nav-item">
        <a class="nav-link collapsed" href="adminManageUsers.html">
          <i class="bi bi-people"></i>
          <span>Manage All Users</span>
        </a>
      </li>
      
      <li class="nav-item">
        <a class="nav-link" href="adminAddDoctor.html">
          <i class="bi bi-person-plus"></i>
          <span>Add Doctor</span>
        </a>
      </li>
      
      <li class="nav-item">
        <a class="nav-link collapsed" href="adminAddAdmin.html">
          <i class="bi bi-shield-plus"></i>
          <span>Add Admin</span>
        </a>
      </li>

      <li class="nav-heading">System</li>
      
      <li class="nav-item">
        <a class="nav-link collapsed" href="adminSystemLogs.html">
          <i class="bi bi-file-text"></i>
          <span>System Logs</span>
        </a>
      </li>

      <li class="nav-heading">Account</li>
      
      <li class="nav-item">
        <a class="nav-link collapsed" href="adminProfile.html">
          <i class="bi bi-person-circle"></i>
          <span>My Profile</span>
        </a>
      </li>
    </ul>
  </aside>

  <!-- Main Content -->
  <main id="main" class="main">
    
    <!-- Success Message -->
    <div class="alert alert-success alert-dismissible fade show success-message" role="alert">
      <i class="bi bi-check-circle-fill"></i> Doctor added successfully!
      <button type="button" class="btn-close" data-bs-dismiss="alert"></button>
    </div>

    <div class="pagetitle">
      <h1>Add New Doctor</h1>
      <nav>
        <ol class="breadcrumb">
          <li class="breadcrumb-item"><a href="adminDashboard.html">Home</a></li>
          <li class="breadcrumb-item"><a href="admin-manage-users.html">Manage Users</a></li>
          <li class="breadcrumb-item active">Add Doctor</li>
        </ol>
      </nav>
    </div>

    <section class="section">
      <div class="row">
        <div class="col-12">
          <div class="form-card">
            <form id="addDoctorForm">
              <!-- Personal Information -->
              <h5 class="section-title">
                <i class="bi bi-person-badge"></i> Personal Information
              </h5>
              
              <div class="row g-3 mb-4">
                <div class="col-md-6">
                  <label for="doctorName" class="form-label">Full Name <span class="text-danger">*</span></label>
                  <input type="text" class="form-control" id="doctorName" placeholder="Dr. John Smith" required>
                </div>
                <div class="col-md-6">
                  <label for="doctorEmail" class="form-label">Email Address <span class="text-danger">*</span></label>
                  <input type="email" class="form-control" id="doctorEmail" placeholder="doctor@hospital.com" required>
                </div>
                <div class="col-md-6">
                  <label for="doctorPhone" class="form-label">Phone Number <span class="text-danger">*</span></label>
                  <input type="tel" class="form-control" id="doctorPhone" placeholder="+91 9876543210" required>
                </div>
                <div class="col-md-6">
                  <label for="location" class="form-label">Location <span class="text-danger">*</span></label>
                  <input type="text" class="form-control" id="location" placeholder="City, State" required>
                </div>
              </div>

              <!-- Professional Information -->
              <h5 class="section-title">
                <i class="bi bi-briefcase"></i> Professional Information
              </h5>
              
              <div class="row g-3 mb-4">
                <div class="col-md-6">
                  <label for="specialization" class="form-label">Specialization <span class="text-danger">*</span></label>
                  <select class="form-select" id="specialization" required>
                    <option value="">Select Specialization</option>
                    <option value="General Physician">General Physician</option>
                    <option value="Cardiologist">Cardiologist</option>
                    <option value="Dermatologist">Dermatologist</option>
                    <option value="Orthopedic">Orthopedic</option>
                    <option value="Pediatrician">Pediatrician</option>
                    <option value="Neurologist">Neurologist</option>
                    <option value="Gynecologist">Gynecologist</option>
                    <option value="Psychiatrist">Psychiatrist</option>
                    <option value="Dentist">Dentist</option>
                    <option value="ENT Specialist">ENT Specialist</option>
                  </select>
                </div>
                <div class="col-md-6">
                  <label for="startDate" class="form-label">Start Date (Joining Date) <span class="text-danger">*</span></label>
                  <input type="date" class="form-control" id="startDate" required>
                </div>
              </div>

              <!-- Education -->
              <h5 class="section-title">
                <i class="bi bi-mortarboard"></i> Qualifications
              </h5>

              <div id="educationContainer">
                <div class="dynamic-field-group">
                  <input type="text" class="form-control education-degree" placeholder="Degree/Qualification (e.g., MBBS, MD)" required>
                </div>
              </div>
              <button type="button" class="btn btn-sm btn-outline-primary add-more-btn" onclick="addEducationField()">
                <i class="bi bi-plus-circle"></i> Add More
              </button>

              <!-- Languages -->
              <h5 class="section-title mt-4">
                <i class="bi bi-translate"></i> Languages
              </h5>
              
              <div id="languageContainer">
                <div class="dynamic-field-group">
                  <input type="text" class="form-control language-field" placeholder="Language (e.g., English, Hindi)" required>
                </div>
              </div>
              <button type="button" class="btn btn-sm btn-outline-primary add-more-btn" onclick="addLanguageField()">
                <i class="bi bi-plus-circle"></i> Add More
              </button>

              <!-- Account Settings -->
              <h5 class="section-title mt-4">
                <i class="bi bi-shield-lock"></i> Account Settings
              </h5>
              
              <div class="row g-3 mb-4">
                <div class="col-md-6">
                  <label for="doctorPassword" class="form-label">Initial Password <span class="text-danger">*</span></label>
                  <input type="password" class="form-control" id="doctorPassword" minlength="6" required>
                  <small class="text-muted">Minimum 6 characters. Doctor will be required to change on first login.</small>
                </div>
              </div>

              <!-- Form Actions -->
              <div class="d-flex justify-content-end gap-2 form-actions">
                <a href="admin-manage-users.html" class="btn btn-secondary">
                  <i class="bi bi-x-circle"></i> Cancel
                </a>
                <button type="reset" class="btn btn-outline-secondary">
                  <i class="bi bi-arrow-clockwise"></i> Reset
                </button>
                <button type="submit" class="btn btn-success">
                  <i class="bi bi-plus-circle"></i> Add Doctor
                </button>
              </div>
            </form>
          </div>
        </div>
      </div>
    </section>

  </main>

  <!-- Back to top button -->
  <a href="#" class="back-to-top d-flex align-items-center justify-content-center">
    <i class="bi bi-arrow-up-short"></i>
  </a>

  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz" crossorigin="anonymous"></script>

  <!-- Custom JavaScript -->
  <script>
    // Add Education Field
    function addEducationField() {
           const container = document.getElementById('educationContainer');
      const fieldGroup = document.createElement('div');
      fieldGroup.className = 'dynamic-field-group mt-2';
      fieldGroup.innerHTML = `
        <div class="input-group">
          <input type="text" class="form-control education-degree" placeholder="Degree/Qualification (e.g., MS, DM, DNB)" required>
          <button type="button" class="btn btn-danger" onclick="removeField(this)">
            <i class="bi bi-trash"></i>
          </button>
        </div>
      `;
      container.appendChild(fieldGroup);
    }

    // Add Language Field
    function addLanguageField() {
      const container = document.getElementById('languageContainer');
      const fieldGroup = document.createElement('div');
      fieldGroup.className = 'dynamic-field-group mt-2';
      fieldGroup.innerHTML = `
        <div class="input-group">
          <input type="text" class="form-control language-field" placeholder="Language" required>
          <button type="button" class="btn btn-danger" onclick="removeField(this)">
            <i class="bi bi-trash"></i>
          </button>
        </div>
      `;
      container.appendChild(fieldGroup);
    }

    // Remove Field
    function removeField(button) {
      button.closest('.dynamic-field-group').remove();
    }

    // Form Submission
    document.getElementById('addDoctorForm').addEventListener('submit', function(e) {
      e.preventDefault();
      
      // Validate at least one education entry
      const educationFields = document.querySelectorAll('.education-degree');
      if (educationFields.length === 0) {
        alert('Please add at least one education entry');
        return false;
      }
      
      // Collect Education Data
      const educationData = [];
      document.querySelectorAll('.education-degree').forEach(field => {
        if (field.value.trim()) {
          educationData.push(field.value.trim());
        }
      });
      
      // Collect Language Data
      const languageData = [];
      document.querySelectorAll('.language-field').forEach(field => {
        if (field.value.trim()) {
          languageData.push(field.value.trim());
        }
      });
      
      // Form Data
      const formData = {
        name: document.getElementById('doctorName').value,
        email: document.getElementById('doctorEmail').value,
        phone: document.getElementById('doctorPhone').value,
        location: document.getElementById('location').value,
        specialization: document.getElementById('specialization').value,
        startDate: document.getElementById('startDate').value,
        password: document.getElementById('doctorPassword').value,
        education: educationData,
        languages: languageData
      };
      
      // Log form data (for debugging)
      console.log('Doctor Data:', formData);
      
      // Show success message
      document.querySelector('.success-message').style.display = 'block';
      
      // Reset form
      this.reset();
      
      // Remove extra education/language fields
      document.querySelectorAll('.dynamic-field-group').forEach((group, index) => {
        if (index > 0) {
          group.remove();
        }
      });
      
      // Redirect after 2 seconds
      setTimeout(function() {
        window.location.href = 'admin-manage-users.html';
      }, 2000);
    });

    // Set max date to today for start date
    document.getElementById('startDate').max = new Date().toISOString().split('T')[0];
    
    // Phone number formatting
    document.getElementById('doctorPhone').addEventListener('input', function(e) {
      let value = e.target.value.replace(/[^\d+]/g, '');
      
      // Ensure it starts with +91
      if (!value.startsWith('+91') && value.length > 0) {
        if (value.startsWith('+')) {
          value = '+91' + value.substring(1);
        } else {
          value = '+91' + value;
        }
      }
      
      // Limit to +91 plus 10 digits
      if (value.length > 13) {
        value = value.substring(0, 13);
      }
      
      // Add space after +91
      if (value.length > 3) {
        value = value.substring(0, 3) + ' ' + value.substring(3);
      }
      
      e.target.value = value;
    });

    // Sidebar toggle
    document.querySelector('.toggle-sidebar-btn').addEventListener('click', function(e) {
      document.querySelector('body').classList.toggle('toggle-sidebar');
    });
  </script>

  <!-- Template Main JS File -->
  <script src="../../assets/js/main.js"></script>

</body>
</html>